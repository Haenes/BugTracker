{% extends 'base.html' %}

{% load static %}

{% block title %} Issue details {% endblock %}

{% block main %}
	{% include 'sidebar.html' %}

<!-- BREADCRUMB -->
	{% block breadcrumb %}
		<nav aria-label="Breadcrumb">
			<ol class="breadcrumb">

				<li class="breadcrumb-item">
					<a class="link-offset-2 link-secondary link-offset-3-hover link-underline 
						link-underline-opacity-0 link-underline-opacity-75-hover" href="{% url 'projects' %}">
						Projects
					</a>
				</li>

				<li class="breadcrumb-item">
					<a class="link-offset-2 link-secondary link-offset-3-hover link-underline 
						link-underline-opacity-0 link-underline-opacity-75-hover" href="{% url 'boards' project.id %}">
						{{ project.name }}
					</a>
				</li>

				<li class="breadcrumb-item">
					<a class="link-offset-2 link-secondary link-offset-3-hover link-underline 
						link-underline-opacity-0 link-underline-opacity-75-hover" href="{% url 'issue-details' project.id issue.id %}">
						Issue details
					</a>
				</li>

			</ol>
		</nav>
	{% endblock %}

<!-- ISSUE DETAILS -->
	<div class="row mt-2 me-0">
		<div class="container ms-3 mb-2">
			<div class="row justify-content-start text-start">
				<h4 class="h4 fw-normal">Details</h4>
			</div>
		</div>

		<div class="container mb-2">
			<div class="ms-3">
				<form method="post">
					{% csrf_token %}

					{% for field in issue_details_form %}

						{% if field.name == 'title' or field.name == 'description' %}
							<div class=" col-4 mb-3">
								<p class=" m-0 text-start">{{ field.name|title }}</p>
								{{ field }}
							</div>
						
						{% elif field.name == 'project' or field.name == 'author'%}
							{{ field.as_hidden }}

						{% else %}
							<div class="col-2 mb-3">
								<p class=" m-0 text-start">{{ field.name|title }}</p>
								{{ field }}
							</div>

						{% endif %}
					{% endfor %}

<!-- ISSUE DELETE MODAL TRIGER  -->
					<div class="col-4 mt-3">
						<a href="#"
							class="link-danger link-offset-2-hover link-underline-opacity-0 link-underline-opacity-100-hover"
							data-bs-toggle="modal" data-bs-target="#DeleteIssue">
							Delete issue
						</a>
					</div>

					<div class="mt-3">
						<button class="btn btn-primary" type="submit">Save</button>
					</div>
				</form>
			</div>
		</div>
	</div>


<!-- ISSUE DELETE MODAL (LINE 73) -->
	<div class="modal fade" id="DeleteIssue" data-bs-backdrop="static" data-bs-keyboard="true" tabindex="-1"
		aria-labelledby="DeleteIssue" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="DeleteIssue">Attention</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p class="text-center">
						Please note, if you delete issue you will not be able to restore it.
					</p>
					<p class="text-center">Do you really want to delete issue?</p>
				</div>
				<div class="modal-footer">
					<a href="{% url 'delete-issue' project.id issue.id %}"><button type="button"
							class="btn btn-danger">Delete</button></a>
				</div>
			</div>
		</div>
	</div>

{% endblock %}
