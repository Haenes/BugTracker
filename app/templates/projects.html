{% extends 'base.html' %}

{% block title %} Projects {% endblock%}

{% block main %}
	<div class="container-fluid">
		<div>
			<div class="ms-auto mt-3">
				<h4>Projects</h4>
			</div>

<!-- TRIGER CREATE PROJECT MODAL -->
			<button type="button" class="btn btn-outline-primary rounded-3 mt-2" data-bs-toggle="modal"
				data-bs-target="#staticBackdropProject">
				Create new project
			</button>

<!-- TABLE -->
			<div class="table-responsive mt-3 text-center w-auto">
				<table class="table">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th><i class="bi bi-star-fill" style="font-size: 16px; color:grey"></i></th>
							<th scope="col">Name</th>
							<th scope="col">Key</th>
							<th scope="col">Type</th>
							<th scope="col">Date</th>
							<th scope="col">Time</th>
						</tr>
					</thead>
					<tbody>
						{% for project in projects_list %}
						<tr>
							<th scope="row">{{ forloop.counter }}</th>

							{% if project.starred %}
								<td><button type="button" class="btn star-table">
									<i class="fs-6 bi bi-star-fill" style="color: gold;"></i></button>
								</td>
							{% else %}
								<td><button type="button" class="btn star-table">
										<i class="fs-6 bi bi-star" style="color:grey;"></i>
									</button>
								</td>
							{% endif %}

							<td><a class="link-offset-2 link-dark link-offset-3-hover link-underline 
                                link-underline-opacity-0 link-underline-opacity-75-hover"
									href="{% url 'boards' project.id %}">{{ project.name }}</a></td>
									
							<td>{{ project.key }}</td>
							<td>{{ project.type }}</td>
							<td>{{ project.created.date }}</td>
							<td>{{ project.created.time }}</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>

<!-- PAGINATION -->
			<nav aria-label="Page navigation">
				<ul class="pagination pagination-sm justify-content-center">
					<li class="page-item"><a class="page-link">Previous</a></li>
					<li class="page-item active"><a class="page-link" href="#">1</a></li>
					<li class="page-item"><a class="page-link" href="#">2</a></li>
					<li class="page-item"><a class="page-link" href="#">3</a></li>
					<li class="page-item"><a class="page-link" href="#">Next</a></li>
				</ul>
			</nav>
		</div>
	</div>


<!-- CREATE PROJECT MODAL -->
	<div class="modal fade" id="staticBackdropProject" data-bs-backdrop="static" tabindex="-1"
		aria-labelledby="staticBackdropProject" aria-hidden="true" data-backdrop="static">
		<div class="modal-dialog  modal-dialog-centered">
			<div class="modal-content">

				<div class="modal-header">
					<h1 class="modal-title fs-5 text-secondary" id="staticBackdropProject">Create project</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>

				<div class="modal-body">
					<form action="{% url 'projects' %}" method="post">
						{% csrf_token %}
						{% for field in project_modal_form %}

							{% if field.name == "starred" %}
								<div class="col-md-6 mb-4">
									<p class="text-secondary m-0 text-start">Favorite</p>
									{{ field }}
								</div>

							{% else %}
							<div class="col-md-6 mb-3">
								<p class="text-secondary m-0 text-start">{{ field.name|title }}*</p>
								{{ field }}
							</div>

							{% endif %}

							{% if field.errors %}
								{% for error in field.errors %}
									<ol class="mt-2 text-danger fw-medium p-0">{{ error }}</ol>
								{% endfor %}
							{% endif %}
						{% endfor %}

						<div class="modal-footer pb-0">
							<button type="submit" class="btn btn-primary">Create</button>
						</div>

					</form>
				</div>

			</div>
		</div>
	</div>

<!-- ISSUE MODAL -->
	<div class="modal fade" id="staticBackdropIssue" data-bs-backdrop="static" tabindex="-1"
		aria-labelledby="staticBackdropIssue" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
	
				<div class="modal-header">
					<h1 class="modal-title fs-5 text-secondary" id="staticBackdropIssue">Create issue</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
	
				<div class="modal-body">
					<form method="post">
						{% csrf_token %}
						{% for field in issue_modal_form %}

							{% if field.name == "title" %}
							<hr class="border-1 mt-4">
								<div class="col-md-12 mb-3">
									<p class="text-secondary m-0 text-start">{{ field.name|title }}*</p>
									{{ field }}
								</div>

							{% elif field.name == "description" %}
								<div class="col-md-12 mb-3">
									<p class="text-secondary m-0 text-start">{{ field.name|title }}</p>
									{{ field }}
								</div>

							{% elif field.name == "duedate" %}
								<div class="col-md-12 mb-3">
									<p class="text-secondary m-0 text-start">{{ field.name|title }}</p>
									{{ field }}
								</div>
							
							{% else %}
								<div class="col-md-6 mb-3">
									<p class="text-secondary m-0 text-start">{{ field.name|title }}*</p>
									{{ field }}
								</div>

							{% endif %}
						{% endfor %}

						<div class="modal-footer pb-0">
							<button type="submit" class="btn btn-primary">Create</button>
						</div>

					</form>
				</div>

			</div>
		</div>
	</div>

{% endblock %}
